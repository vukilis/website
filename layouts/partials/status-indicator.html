<a href="https://homepage.vukilis.com" target="_blank" style="text-decoration: none; margin-right: 3px;">
    <div style="display: inline-flex; font-family: sans-serif; font-size: 14px; font-weight: bold; border-radius: 4px; overflow: hidden;">
        <div style="background-color: #555; color: #a9a9b3; padding: 0px 5px; align-items: center;">
            ʜᴏᴍᴇʟᴀʙ
        </div>
        <div id="status-part" style="background-color: gray; color: white; padding: 0px 5px; transition: background-color 0.3s; align-items: center;">
            checking...
        </div>
    </div>
</a>

<script>
document.addEventListener("DOMContentLoaded", function () {
    const statusPart = document.getElementById("status-part");

    function setStatus(isUp) {
        if (isUp) {
            statusPart.style.backgroundColor = "#2ECC71";
            statusPart.textContent = "ᴜᴘ";
        } else {
            statusPart.style.backgroundColor = "#E74C3C";
            statusPart.textContent = "ᴅᴏᴡɴ";
        }
    }

    function checkStatus() {
    fetch("https://homepage.vukilis.com", {
            method: "HEAD",
            mode: "no-cors"
        })
        .then(() => {
            setStatus(true);
        })
        .catch(() => {
            setStatus(false);
        });
    }

    checkStatus();
    setInterval(checkStatus, 30000);
});
</script>

<a href="https://status.vukilis.com" target="_blank" style="text-decoration: none;">
    <div style="display: inline-flex; font-family: sans-serif; font-size: 14px; font-weight: bold; border-radius: 4px; overflow: hidden;">
        <div style="background-color: #555; color: #a9a9b3; padding: 0px 5px; align-items: center;">
            sᴛᴀᴛᴜs
        </div>
        <div id="status-part-kuma" style="background-color: gray; color: white; padding: 0px 5px; transition: background-color 0.3s; align-items: center;">
            checking...
        </div>
    </div>
</a>

<script>
(function() {
    document.addEventListener("DOMContentLoaded", function () {
        const statusPartKuma = document.getElementById("status-part-kuma");
        if (!statusPartKuma) return;

        let controller = new AbortController();

        function setStatus(upCount, downCount, totalCount) {
            if (totalCount === 0) {
                statusPartKuma.textContent = "ɴᴏ ᴅᴀᴛᴀ";
                statusPartKuma.style.backgroundColor = "#95A5A6";
                return;
            }

            if (downCount === totalCount) {
                statusPartKuma.textContent = "ᴅᴏᴡɴ";
                statusPartKuma.style.backgroundColor = "#E74C3C"; 
            } else if (downCount > 0) {
                statusPartKuma.textContent = `ᴘᴀʀᴛɪᴀʟ (${downCount})`;
                statusPartKuma.style.backgroundColor = "#F39C12"; 
            } else {
                statusPartKuma.textContent = "ᴜᴘ";
                statusPartKuma.style.backgroundColor = "#2ECC71"; 
            }
        }

        async function checkUptimeKumaStatus() {
            controller.abort();
            controller = new AbortController();

            // FIX: Added timestamp (?t=) to bypass corsproxy.io cache
            const targetUrl = "https://status.vukilis.com/api/status-page/heartbeat/services?t=" + Date.now();
            const proxyUrl = "https://corsproxy.io/?" + encodeURIComponent(targetUrl);

            try {
                const response = await fetch(proxyUrl, { 
                    signal: controller.signal,
                    cache: "no-cache" // Tell the browser not to cache
                });
                const data = await response.json();
                
                // --- Fix Monitor Name Mapping ---
                let nameMap = {};
                if (data.publicGroupList) {
                    data.publicGroupList.forEach(group => {
                        group.monitorList.forEach(m => {
                            nameMap[m.id] = m.name;
                        });
                    });
                }

                const heartbeats = data.heartbeatList || {};
                let upCount = 0;
                let downCount = 0;
                let totalCount = 0;
                let debugData = [];

                for (let id in heartbeats) {
                    const pulses = heartbeats[id];
                    if (Array.isArray(pulses) && pulses.length > 0) {
                        const latest = pulses[pulses.length - 1];
                        const monitorName = nameMap[id] || `ID: ${id}`;
                        
                        if (latest.status === 1) {
                            upCount++;
                        } else {
                            downCount++;
                        }
                        totalCount++;

                        debugData.push({
                            "Server Name": monitorName,
                            "Status": latest.status === 1 ? "✅ UP" : "❌ DOWN",
                            "Time": latest.time
                        });
                    }
                }
                
                // console.clear();
                // console.log("%cUptime Kuma Dashboard (LIVE)", "color: #3498db; font-weight: bold;");
                // console.table(debugData); 
                
                setStatus(upCount, downCount, totalCount);

            } catch (err) {
                if (err.name !== 'AbortError') {
                    // console.error("Fetch Error:", err);
                    statusPartKuma.textContent = "ᴇʀʀᴏʀ";
                    statusPartKuma.style.backgroundColor = "#E74C3C";
                }
            }
        }

        setTimeout(checkUptimeKumaStatus, 200);
        setInterval(checkUptimeKumaStatus, 60000);
    });
})();
</script>

<a href="https://vukilis.com/homelab_diagram" target="_blank" style="text-decoration: none; margin-left: 3px;">
    <div style="display: inline-flex; font-family: sans-serif; font-size: 14px; font-weight: bold; border-radius: 4px; overflow: hidden;">
        <div style="background-color: #555; color: #a9a9b3; padding: 0px 5px; align-items: center;">
            ᴅɪᴀɢʀᴀᴍ
        </div>
        <div id="status-part" style="background-color: darkorange; color: white; padding: 0px 5px; transition: background-color 0.3s; align-items: center;">
            sʜᴏᴡ
        </div>
    </div>
</a>